# Proyecto: SIOPV

> Sistema Inteligente de Análisis y Priorización de Vulnerabilidades

---

## Información General

| Campo | Valor |
|-------|-------|
| **Path** | `~/SIOPV/` |
| **Tipo** | Sistema de análisis de vulnerabilidades |
| **Arquitectura** | Hexagonal (Ports & Adapters) |
| **Python** | 3.11+ |
| **Creado** | 2026-01-23 |

---

## Stack Tecnológico

- **Core:** Python 3.11+, Pydantic v2, structlog
- **CLI:** Typer, Rich
- **HTTP:** httpx (async)
- **Base de datos:** PostgreSQL + SQLAlchemy (asyncpg)
- **Cache:** Redis
- **Vector DB:** ChromaDB (semantic search)
- **Autorización:** OpenFGA (ReBAC)
- **ML:** XGBoost, SHAP
- **Pipeline:** LangGraph
- **API:** FastAPI
- **Dashboard:** Streamlit + Plotly

---

## Progreso de Fases

| Fase | Estado | Notas |
|------|--------|-------|
| 0. Setup inicial | ✅ Completado | Estructura hexagonal, pyproject.toml, CLI base |
| 1. Domain entities | ✅ Completado | Vulnerability, CVSSScore, EPSSScore, CVEResearchResult |
| 2. Ingestion (parsers) | ✅ Completado | Parser Trivy JSON, deduplicación |
| 3. CVE Research | ✅ Completado | NVD, EPSS, CISA KEV, GitHub Advisories |
| 4. Enrichment | ✅ Completado | Batch EPSS + KEV enrichment |
| 5. CLI Commands | ✅ Completado | scan, research, report |
| 6. Reports | ✅ Completado | HTML, Markdown, JSON |
| 7. Tests | ✅ Completado | 9 tests unitarios pasando |
| 8. XAI/LangGraph | ✅ Completado | XGBoost classifier, SHAP explainer, LangGraph pipeline |
| 9. API/Dashboard | ✅ Completado | FastAPI REST API, Streamlit dashboard |
| 10. Infrastructure | ✅ Completado | PostgreSQL, Redis, ChromaDB, OpenFGA |

---

## Comandos Útiles

```bash
# Ir al proyecto
cd ~/SIOPV

# Ejecutar CLI
uv run siopv --help
uv run siopv scan data/samples/trivy-report.json
uv run siopv research CVE-2024-3094
uv run siopv report data/samples/trivy-report.json --format html

# API (FastAPI)
uv run uvicorn src.interfaces.api:app --reload
# Endpoints: /health, /scan, /research/{cve_id}, /pipeline, /classify/{cve_id}

# Dashboard (Streamlit)
uv run streamlit run src/interfaces/dashboard/app.py

# Tests
uv run pytest

# Formatear código
uv run ruff format src tests

# Lint
uv run ruff check src tests --fix

# Type check
uv run mypy src --ignore-missing-imports

# Docker (Infrastructure)
docker-compose up -d          # Start PostgreSQL, Redis, ChromaDB, OpenFGA
docker-compose ps             # Check status
docker-compose logs -f        # View logs
docker-compose down           # Stop all

# Database migrations (manual)
uv run python -c "import asyncio; from src.adapters.persistence import init_db; asyncio.run(init_db())"
```

---

## Especificación

> Agregar aquí la especificación detallada del proyecto o referenciar archivo externo.
> Ejemplo: `docs/spec.md` o pegar contenido aquí.

---

## Notas de Desarrollo

- Proyecto creado: 2026-01-23
- Arquitectura hexagonal implementada completamente
- Sistema funcional con CLI, API y Dashboard
- Pipeline de análisis: ingest → enrich → classify → explain → output
- ML: XGBoost classifier con fallback heurístico
- XAI: SHAP explainer con fallback para audit compliance
- APIs externas integradas: NVD, EPSS, CISA KEV, GitHub Advisories
- **Infraestructura completa:**
  - PostgreSQL: Persistencia de vulnerabilidades, scans, research
  - Redis: Cache de respuestas API con TTL configurable
  - ChromaDB: Búsqueda semántica de vulnerabilidades
  - OpenFGA: Autorización granular (ReBAC) con modelo de organización
